<div class="flex flex-wrap justify-between items-center gap-2 mb-3">
  <mat-slide-toggle [checked]="showContent()" (change)="showContent.set($event.checked)"
    >Show content</mat-slide-toggle
  >
  <button matButton="tonal" (click)="addSectionItem()">
    <mat-icon>add</mat-icon> Add Section Item
  </button>
</div>

<form [hidden]="!showContent()" [formGroup]="form()">
  <field-form label="Content" [control]="$any(content)">
    <editor [control]="$any(content)" />
  </field-form>
</form>

<mat-accordion [multi]="false">
  @for (sc of section_items.controls; track $index) {
  <mat-expansion-panel #sectionItems>
    <mat-expansion-panel-header class="flex group">
      <mat-panel-title class="flex-1">
        <title-input-form
          [control]="$any(sc.get('title'))"
          placeholder="Enter Section Item Title..."
        />
      </mat-panel-title>
      <mat-panel-description class="!flex-none">
        <span class="hidden group-hover:flex">
          <button matIconButton (click)="onDelete($event, $index)">
            <mat-icon fontSet="material-symbols-outlined" class="text-error">delete</mat-icon>
          </button>
        </span>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <section-item-form [form]="$any(sc)" />
  </mat-expansion-panel>
  }
</mat-accordion>
