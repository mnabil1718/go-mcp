<form (submit)="onSubmit($event)">
  <mat-form-field class="w-full">
    <div class="items-end" [class.flex]="!this.service.sendUp()">
      <textarea
        matInput
        #chat
        #autosize="cdkTextareaAutosize"
        cdkTextareaAutosize
        cdkTrapFocus
        cdkAutosizeMinRows="1"
        cdkAutosizeMaxRows="7"
        [cdkTrapFocusAutoCapture]="true"
        placeholder="Start chatting..."
        class="!mb-2"
        [formControl]="this.service.prompt"
        (input)="onInput()"
        (keydown)="onKeyDown($event)"
      ></textarea>
      <div class="flex justify-end">
        <button
          matIconButton
          type="submit"
          class="transition-all duration-150"
          aria-label="Send message"
          [disabled]="
            this.service.prompt.invalid ||
            !this.service.prompt.value ||
            isGenerating() ||
            !this.service.prompt.value.trim()
          "
        >
          <mat-icon>send</mat-icon>
        </button>
      </div>
    </div>
  </mat-form-field>
</form>
